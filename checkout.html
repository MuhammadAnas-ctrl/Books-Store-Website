<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="checkout.css">
    <title>CheckOut</title>
</head>
<body>
    

<h1>Checkout Form</h1>
<div class="row">
  <div class="col-75">
    <div class="container">
      
        <div class="row">
          <div class="col-50">
            <h3>Billing Address</h3>
            <form>
            <label for="fname"><i class="fa fa-user"></i> Full Name</label>
            <input type="name" id="fname" name="firstname" placeholder="John M. Doe" required>
            <label for="email"><i class="fa fa-envelope"></i> Email</label>
            <input type="email" id="email" name="email" placeholder="john@example.com" required>
            <label for="phone"><i class="fa fa-institution"></i> Phone</label>
            <input type="phone" id="phone" name="city" placeholder="Phone Number" required>
            <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
            <input type="Address" id="adr" name="address" placeholder="542 W. 15th Street" required>
            <label for="city"><i class="fa fa-institution"></i> City</label>
            <input type="city" id="city" name="city" placeholder="New York" required>
            </form>
          </div>
          
        </div>
        <label>
          <input type="checkbox" checked="checked" name="sameadr"> Shipping address same as billing
        </label>
        <button class="btn" id="btn" onclick="SetInStorage()">Submit</button>
    </div>
  </div>
</div>





<script src="https://smtpjs.com/v3/smtp.js"></script>
<script src="https://kit.fontawesome.com/f497a2fd00.js" crossorigin="anonymous"></script>
<script>
    function SetInStorage(e) {
//   e.preventDeafult();
  let name = document.getElementById("fname");
  let email = document.getElementById("email");
  let phone = document.getElementById("phone");
  let address = document.getElementById("adr");
  let city = document.getElementById("city");
  let btn = document.getElementById("btn");
  let input = document.getElementsByTagName("input");

  if(input === "" || input == null){
    alert("Please fill in all fields");
  }
  localStorage.setItem("name", name.value);
  localStorage.setItem("email", email.value);
  localStorage.setItem("phone", phone.value);
  localStorage.setItem("adr", address.value);
  localStorage.setItem("city", city.value);

//   let get = localStorage.getItem("name");
//   console.log(get);

let getname = localStorage.getItem("name")
let getemail = localStorage.getItem("email")
let getphone = localStorage.getItem("phone")
let getadr = localStorage.getItem("adr")
let getcity = localStorage.getItem("city")

let Id_Val = Math.floor(Math.random()*10000)
let Id_Cd = `Customers ID : ${Id_Val}`

console.log(Id_Cd)
Email.send({
  SecureToken: "072ae52d-3ecb-4597-95b1-d30da9a6b717",
  To: "flashycoderch@gmail.com",
  From: "flashycoderch@gmail.com",
  Subject: `${localStorage.getItem("name")} has Order...`,
  Body: `
  <h1>Order Details</h1>
  <p>${Id_Cd}</p>,
  Name : ${getname} <br>,
  Email : ${getemail} <br>,
  Phone-No : ${getphone} <br>,
  Address : ${getadr} <br>,
  City : ${getcity} <br>,
  `,
}).then((message) =>{
    if(message == "OK"){
        alert("Your Oder Has Been Made SuccessFull")
  window.open("index.html", "_self")
        
    }
    
    else{
        alert("Error")
    }
});
}

</script>
</body>
</html>